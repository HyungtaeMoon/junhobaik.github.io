---
title: Django에서 가상 환경 설정
date: 2018-08-28 23:11 +0900
tags:
  - python
  - django
  - pycharm
  - setting
---

- 이 블로그는 개인의 공부 목적으로 포스팅을 합니다.
- 잘못된 내용에 대한 댓글은 언제든 환영합니다.

<br>
<br>
맨 처음 공부하면서 어려웠던 것은 순수하게 "**파이썬만 공부하면 나머지는 금방 배우겠지**" 라는 막연한 생각도 했었던 것 같고 모든 것은 실수였다. 그리고 **파이썬 기초부터 배포** 까지의 한 사이클을 돌고나니 공부해야 할 것은 태산이고 다양한 에러 발생에 대한 대처와 해결, 각 환경에 대한 이해까지 여러가지를 공부해야 하고 부족하다는 것도 참 많이 느꼈었다.
<br>
각 카테고리별로 자세한 내용을 다루기로 하고 이번 내용은 가상환경을 설정을 위해 알아두어야 하는 기본 개념만을 구글링과 내 생각을 토대로 이 블로그에 정리할 예정이다.
<br>
<br>
### # 파이썬(Python)
C언어로 구현, 다양한 라이브러리 지원(Battery Included 프로그래머가 바로 사용할 수 있는 라이브러리들이 같이 제공). 기본중의 기본이고 필수 중에 필수이다. 그러나 Django를 이용하여 배포를 할 때는 이것이 전부가 아니라는 것을 깨달았다.
<br>
<br>
### # 장고(Django)
파이썬으로 만들어진 웹 애플리케이션 프레임워크로 웹 사이트를 구축할 때 필요한 회원가입, 로그인, 로그아웃, 이미지 업로드 등 기본 기능을 제공. MTV 프레임워크로 보기도 한다. 부트스트랩을 이용하면 그럴싸한 홈페이지를 만들 수 있다. 배포까지의 과정을 겪고나니 Django는 오류를 친절하게 띄워주는 편이라는 것을 나중에 느끼게 되었다.
<br>
<br>
### # 파이참(Pycharm)
통합개발환경(IDE)으로 언어를 보다 편하게 이용할 수 있도록 구성된 환경. 파이참을 이용하여 Django 프로젝트를 관리한다. 즉, 파이참은 Django 를 거들어줄 뿐.
<br>
<br>
### # Git
분산 버전 관리 시스템인 이 git 은 리누스 토발즈라는 사람이 기존의 버전 관리 툴들이 마음에 들지 않아 직접 만들었다고 한다. 커밋 단위로 프로젝트 관리를 할 수 있다. 인터넷이 연결되지 않는 환경에서도 커밋 단위별로 저장이 가능하며, 인터넷이 연결되면 나중에 한꺼번에 push 하면 되는 편의성도 갖추고 있다. 그리고 push 를 할 때는 스냅샷단위로 딱 그 순간만을 저장하여 용량도 크지 않다. 그리고 용량을 크게 차지하지 않는 두번째 이유는 추가/삭제 된 내용만을 커밋에 포함하기 때문에 큰 용량을 차지하지 않는다.
<br>
<br>
### # 가상환경(Virtualenv, Pipenv)
여러가지 프로젝트를 한꺼번에 진행할 때 늘 최신의 버전만으로 이용할 수는 없다. 기존에 개발했던 프로젝트는 그 프로젝트의 버전으로 유지보수를 해야 오류없이 작동이 되기 때문이다.
<br>
그래서 나온 이 가상환경은 각 프로젝트에 맞춰 파이썬버전부터 라이브러리까지 단독적으로 관리할 수 있게 해준다.
<br>
<br>
### # 초기 프로젝트 세팅 방법

> 1) git 디렉토리 생성(선택사항)

```
# git 디렉토리 생성
> git init


# 저장소에 들어가서는 안되는 정보를 작성.
절대 무시하지 말자. 나중에 큰 코 다친다.
> vi .gitignore
```

git init 명령어를 입력하는 순간 .git 이라는 디렉토리가 생성된다. 이 디렉토리 안에 <branch명> <커밋내용> 등 git 과 관련한 내용들이 담겨있는 것을 확인했다.

`cd .git` 또는 `tree .git` 명령어를 입력하여 자세한 내용을 확인해보자.

> 2) 가상환경 설정

```
# 가상환경을 설정하며 가상환경으로 진입
#
> pipenv shell
```
가상환경 위에 패키지들을 설치하기 때문에 이 작업은 **프로젝트를 처음 시작할 때나 작업을 시작할 때** 무조건 출발점이 되어야만 한다. 자주 실수했었던 일인데 작업하는 프로젝트를 `exit` 했다가 다시 pipenv shell 로 해당 프로젝트에 진입해야 하는데 가상환경에 진입하지도 않고 패키지들이 작동하지 않아 생뚱맞은 곳에서 오류를 찾으려 했었던 일들도 많았다.
<br>
<br>
두번째 조심해야 할 점은 현재 A 프로젝트의 디렉토리(폴더)를 벗어나도 가상환경은 유지가 되어있다. 드라이브 전체를 하나의 가상환경으로 품고싶지 않다면 항상 주의하자.
<br>
<br>
> 3) Django 설치

```
> pipenv install django
```
django 를 설치해야만 프로젝트, 어플리케이션 생성, admin 페이지에 대한 접근(로그인, 로그아웃, 파일 업로드) 등등의 작업을 진행할 수 있다.
<br>
<br>
> 4) Django를 이용하여 project, app 생성

```
> django-admin.py startproject <프로젝트명>

> cd <프로젝트명>

> ./manage.py startapp <애플리케이션명>
```
`project` 같은 경우에는 프로젝트의 `설정(settings)`와 진행하고자 하는 프로젝트의 base 가 되는 관련 내용들이 담겨있고, app 은 이 프로젝트를 이용하여 실제 사용자에게 보여지는 model, view 등을 담고 있다.
<br>
<br>
또한 애플리케이션은 하나의 프로젝트 안에 여러개를 생성할 수 있는데 블로그를 예로들어, 게시글(posts), 사용자(members) 처럼 역할마다 구분지어 app 을 생성하는 것을 권장한다.
<br>
<br>
그리고 `django-admin.py startapp <애플리케이션명>` 으로 app 을 생성할 수 있지만 굳이 수고스럽게 프로젝트 안에서 애플리케이션을 생성하는 이유는 트리구조를 유지하기 위해서이고 setting 안에 포함시켜야 하기 때문이다.
<br>
> 5) 가상환경으로 지정

```
1) 작업할 디렉토리에서 . charm

2) Preferences 옵션 (ctrl + ,)

3) 좌측 옵션에서 Project: <디렉토리명>
Project Interpreter

4) Existing environment 옵션 선택

5) .local > virtualenvs > <디렉토리명> > python 3.6
```
마침표(.)는 현재의 위치에서 무엇인가를 실행하겠다는 명령어이다. 실제로 `. charm`, `. manage.py` 등의 명령어는 숱하게 많이 타이핑하게 될 것이다. 이렇게 가상환경으로 지정하는 이유는 여러가지 이유가 있겠지만 내가 설치한 패키지들이 내가 지정한 가상환경 안에 설치해두어야 하는 것에 가장 큰 목적을 가지고 있다고 본다.
<br>
<br>
> 그 외 자주 쓰는 명령어들

```
# 가상환경 삭제(이미 설정한 가상환경을 삭제)
> pipenv --rm


# 특정 파이썬 버전으로 설치
> pipenv --python 3.6.5


# pipfile 에 저장되어 있는 패키지들을 설치할 때
> pipenv install
```
